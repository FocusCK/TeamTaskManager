{% extends 'users/base.html' %}

{% block title %}Dashboard - Task Management{% endblock %}

{% block content %}
<h2 class="text-center mb-4">Your Dashboard</h2>

<!-- Display Quote -->
<div class="quote-section bg-light p-4 rounded shadow-sm mb-4">
    <h5 class="font-weight-bold">Quote of the Day:</h5>
    <p>{{ quote }}</p>
</div>

<!-- Tasks in Card Layout -->
<div class="task-container">
    {% for task in tasks %}
        <div class="card-stack">
            <div class="card task shadow-lg mb-3" id="task-card-{{ task.id }}" onclick="toggleCard({{ task.id }})">
                <div class="card-header bg-info text-white">
                    <h5 class="task-title mb-0">{{ task.title }}</h5>
                </div>
                <div class="card-body collapse" id="task-details-{{ task.id }}">
                    <p><strong>Due:</strong> {{ task.due_date }}</p>
                    <p><strong>Status:</strong> {% if task.completed %} Completed {% else %} Incomplete {% endif %}</p>
                    <p>{{ task.description|slice:":200" }}...</p>  <!-- Show the first 200 characters -->
                    <a href="{% url 'update_task' task.id %}" class="btn btn-warning btn-sm">Edit</a>
                    <a href="{% url 'delete_task' task.id %}" class="btn btn-danger btn-sm" onclick="return confirmDelete({{ task.id }})">Delete</a>
                </div>
            </div>
        </div>
    {% endfor %}
</div>

<div class="mt-3">
    <a href="{% url 'create_task' %}" class="btn btn-success btn-lg">Create a new task</a>
</div>
{% endblock %}

<script>
    function toggleCard(taskId) {
        const cardDetails = document.getElementById(`task-details-${taskId}`);
        cardDetails.classList.contains('collapse');
    }

    function confirmDelete(taskId) {
        const confirmDeletion = confirm("Are you sure you want to delete this task?");
    }
</script>


